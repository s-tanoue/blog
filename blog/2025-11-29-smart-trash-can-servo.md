---
slug: smart-trash-can-servo
title: 【初心者向け】サーボモーターで作る「手をかざすと開くスマートゴミ箱」
authors:
  name: Blog Maintainer
  title: Maintainer
  url: https://example.com
  image_url: https://avatars.githubusercontent.com/u/1?v=4
tags: [Arduino, モーター, サーボ, IoT, DIY, 電子工作, 初心者向け]
---

ゴミ箱の蓋を触るのって、ちょっと抵抗がありませんか？

この記事では、**手をかざすだけで蓋が自動で開くスマートゴミ箱** を Arduino とサーボモーターで作ります。モーターの仕組みから丁寧に解説するので、電子工作初心者の方も安心です！

<!--truncate-->

## このプロジェクトで解決できる課題

- 料理中など手が汚れているときにゴミ箱を触りたくない
- 衛生的にゴミを捨てたい
- 足踏み式は壊れやすい・場所を取る

## 完成イメージ

```
        ┌─────────────────┐
        │    超音波センサー   │  ← 手を検知
        │     (HC-SR04)    │
        └────────┬────────┘
                 │
      ┌──────────▼──────────┐
      │                      │
  ════╪════════════════════╪════  ← 蓋（自動で開閉）
      │  ↑                   │
      │  │ サーボモーター      │
      │  │ で持ち上げる        │
      │                      │
      │   ┌────────────┐    │
      │   │  ゴミ袋     │    │
      │   │            │    │
      │   └────────────┘    │
      │                      │
      └──────────────────────┘
            ゴミ箱本体
```

## 必要なもの

### ハードウェア

| 部品 | 数量 | 参考価格 | 用途 |
|------|------|----------|------|
| Arduino Uno (または互換機) | 1 | ¥500〜2,000 | 頭脳 |
| サーボモーター (SG90) | 1 | ¥200〜400 | 蓋を動かす |
| 超音波センサー (HC-SR04) | 1 | ¥150〜300 | 手を検知 |
| ジャンパーワイヤー | 適量 | ¥300 | 配線 |
| ブレッドボード | 1 | ¥200 | 配線の土台 |
| ゴミ箱（蓋付き） | 1 | ¥100〜500 | 本体 |
| 針金または工作用棒 | 1本 | ¥100 | 蓋との連結 |

**合計: 約1,500〜4,000円**

### ソフトウェア

- Arduino IDE（無料でダウンロード可能）

## まずはモーターの基礎を理解しよう

### モーターの種類と特徴

電子工作でよく使うモーターは3種類あります：

```
┌─────────────────────────────────────────────────────────────┐
│                    モーターの種類比較                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  【DCモーター】          【サーボモーター】      【ステッピング】  │
│                                                             │
│    ↻ グルグル             ↺→ 角度指定          ⟲ 精密回転     │
│    回り続ける              0°〜180°            1ステップずつ   │
│                                                             │
│  用途: 扇風機、車輪     用途: ロボットアーム     用途: 3Dプリンタ │
│  制御: 回す/止める      制御: 角度を指定        制御: 回転量指定 │
│  難易度: ★☆☆          難易度: ★☆☆          難易度: ★★☆   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 今回使うサーボモーター（SG90）

サーボモーターは**指定した角度に動かせる**のが最大の特徴です。

```
         サーボモーター（SG90）の構造
        ┌────────────────────────────┐
        │                            │
        │    ホーン（白い羽根）         │
        │        ↓                   │
        │       ╭─╮                  │
        │      ╱   ╲                 │
        │     ╱     ╲   ← これが回転   │
        │    ╱       ╲    0°〜180°    │
        │   ├─────────┤               │
        │   │  ┌───┐  │               │
        │   │  │   │  │  ← 本体       │
        │   │  │ M │  │               │
        │   │  │   │  │               │
        │   │  └───┘  │               │
        │   └────┬────┘               │
        │        │                    │
        │    ┌───┴───┐               │
        │    │ │ │   │  ← 3本の線    │
        │    茶 赤 橙                  │
        │    GND 5V 信号              │
        │                            │
        └────────────────────────────┘
```

### サーボの動き方

```
   0度の状態        90度の状態        180度の状態
       │              ／                 ─
       │            ／
   ┌───┴───┐    ┌───┴───┐           ┌───┴───┐
   │       │    │       │           │       │
   │   M   │    │   M   │           │   M   │
   │       │    │       │           │       │
   └───────┘    └───────┘           └───────┘
```

Arduinoから「90度にして！」と命令すると、サーボは自動的に90度の位置まで動いて止まります。これがサーボモーターの便利なところです。

## システム構成図

```
    【電源】USB または ACアダプター
        │
        ▼
┌───────────────────────────────────────────────────────────┐
│                     Arduino Uno                          │
│                                                          │
│   5V ──────────┬──────────────────┐                      │
│                │                  │                      │
│   GND ─────────┼──────────────────┼──────┐               │
│                │                  │      │               │
│   D9 ──────────┼──────────────────┼──────┼───────┐       │
│                │                  │      │       │       │
│   D10 (Trig)───┼───────┐          │      │       │       │
│                │       │          │      │       │       │
│   D11 (Echo)───┼───────┼──────┐   │      │       │       │
│                │       │      │   │      │       │       │
└────────────────┼───────┼──────┼───┼──────┼───────┼───────┘
                 │       │      │   │      │       │
                 │       │      │   │      │       │
        ┌────────┴─┐  ┌──┴──────┴───┴──┐   │  ┌────┴────┐
        │   5V     │  │ 超音波センサー   │   │  │ サーボ   │
        │   │      │  │   (HC-SR04)    │   │  │  (SG90)  │
        │   │      │  │                │   │  │         │
        │  ┌┴┐     │  │  VCC Trig Echo │   │  │ 信号 5V │
        │  │ │赤   │  │   │   │    │   │   │  │  │   │  │
        │  └─┘     │  │   ●   ●    ●   │   │  │  ●   ●  │
        │   ││     │  │               GND  │  │       GND │
        └───┘│     │  └────────────────┼───┘  └───────┼──┘
             │     │                   │              │
             └─────┴───────────────────┴──────────────┘
                              GND（共通）
```

## 配線図（詳細）

### 超音波センサー（HC-SR04）の接続

```
HC-SR04         Arduino
─────────────────────────
VCC      →      5V
Trig     →      D10
Echo     →      D11
GND      →      GND


HC-SR04の見た目（正面から）
┌─────────────────────────────┐
│   ○              ○         │  ← 2つの「目」（超音波送受信部）
│  送信            受信       │
│                             │
│  ┌───┬───┬───┬───┐         │
│  │VCC│Trg│Ech│GND│         │  ← 4本のピン
│  └───┴───┴───┴───┘         │
└─────────────────────────────┘
```

### サーボモーター（SG90）の接続

```
SG90            Arduino
─────────────────────────
茶色（GND）  →   GND
赤色（VCC）  →   5V
橙色（信号）  →   D9


配線の色を確認！
┌─────────────────────────────┐
│                             │
│    SG90 の配線               │
│                             │
│    ┌─────┐                  │
│    │■■■│  ← コネクタ       │
│    │茶赤橙│                  │
│    └──┬──┘                  │
│       │                     │
│    茶 = GND （マイナス）      │
│    赤 = 5V  （プラス）        │
│    橙 = 信号 （制御用）       │
│                             │
└─────────────────────────────┘
```

### ブレッドボードでの配線例

```
            ブレッドボード
┌─────────────────────────────────────────────┐
│  + + + + + + + + + + + + + + + + + + + + +  │ ← 5V ライン（赤）
│  - - - - - - - - - - - - - - - - - - - - -  │ ← GND ライン（青）
├─────────────────────────────────────────────┤
│                                             │
│  a ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ●   │
│  b ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ●   │
│  c ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ●   │
│  d ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ●   │
│  e ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ● ●   │
│     1 2 3 4 5 6 7 8 9 ...                   │
│                                             │
│         ↑                   ↑              │
│     HC-SR04の             SG90の            │
│     ピンを挿す             配線を挿す         │
│                                             │
└─────────────────────────────────────────────┘
```

## 超音波センサーの仕組み

手を検知する仕組みを理解しておきましょう：

```
超音波センサーの動作原理

        ┌──────────┐
        │ HC-SR04  │
        │  ○   ○  │
        │ 送信 受信 │
        └────┬─────┘
             │
     ～～～～～│～～～～～  超音波を発射（人には聞こえない）
             │
             ▼
         ┌──────┐
         │  手  │  ← 障害物（手）に当たって跳ね返る
         └──────┘
             │
     ～～～～～│～～～～～  反射波
             │
             ▼
        ┌────┴─────┐
        │  ○   ○  │
        └──────────┘
             │
             ▼
    往復にかかった時間から
    距離を計算できる！

    距離 = 時間 × 音速 ÷ 2
```

## プログラムを書こう

Arduino IDE で以下のコードを入力します：

```cpp
// スマートゴミ箱 - 手をかざすと蓋が開く
// サーボモーターと超音波センサーを使用

#include <Servo.h>  // サーボモーター用ライブラリ

// ピン設定
const int SERVO_PIN = 9;      // サーボモーターの信号線
const int TRIG_PIN = 10;      // 超音波センサーのTrig
const int ECHO_PIN = 11;      // 超音波センサーのEcho

// 動作設定
const int OPEN_ANGLE = 90;    // 蓋を開けた時の角度
const int CLOSE_ANGLE = 0;    // 蓋を閉じた時の角度
const int DETECT_DISTANCE = 20; // 検知距離（cm）
const int OPEN_TIME = 3000;   // 開いている時間（ミリ秒）

// サーボオブジェクトを作成
Servo lidServo;

// 現在の蓋の状態
bool isOpen = false;
unsigned long openedTime = 0;

void setup() {
  Serial.begin(9600);

  // ピンの設定
  pinMode(TRIG_PIN, OUTPUT);
  pinMode(ECHO_PIN, INPUT);

  // サーボモーターの初期化
  lidServo.attach(SERVO_PIN);
  lidServo.write(CLOSE_ANGLE);  // 最初は閉じた状態

  Serial.println("=== スマートゴミ箱 起動！ ===");
  Serial.println("手をかざすと蓋が開きます");
}

void loop() {
  // 距離を測定
  int distance = measureDistance();

  // デバッグ表示
  Serial.print("距離: ");
  Serial.print(distance);
  Serial.println(" cm");

  // 手を検知したら蓋を開ける
  if (distance > 0 && distance < DETECT_DISTANCE) {
    openLid();
  }

  // 一定時間経ったら蓋を閉じる
  if (isOpen && (millis() - openedTime > OPEN_TIME)) {
    closeLid();
  }

  delay(100);  // 少し待つ
}

// 距離を測定する関数
int measureDistance() {
  // 超音波を発射
  digitalWrite(TRIG_PIN, LOW);
  delayMicroseconds(2);
  digitalWrite(TRIG_PIN, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG_PIN, LOW);

  // 反射波を受信するまでの時間を測定
  long duration = pulseIn(ECHO_PIN, HIGH, 30000);

  // 時間が0なら測定失敗
  if (duration == 0) {
    return -1;
  }

  // 距離を計算（音速340m/s、往復なので÷2）
  int distance = duration * 0.034 / 2;

  return distance;
}

// 蓋を開ける関数
void openLid() {
  if (!isOpen) {
    Serial.println(">>> 蓋を開けます！");

    // ゆっくり開ける（なめらかな動き）
    for (int angle = CLOSE_ANGLE; angle <= OPEN_ANGLE; angle += 5) {
      lidServo.write(angle);
      delay(15);
    }

    isOpen = true;
    openedTime = millis();
  } else {
    // すでに開いている場合は時間を延長
    openedTime = millis();
  }
}

// 蓋を閉じる関数
void closeLid() {
  Serial.println("<<< 蓋を閉じます");

  // ゆっくり閉じる
  for (int angle = OPEN_ANGLE; angle >= CLOSE_ANGLE; angle -= 5) {
    lidServo.write(angle);
    delay(15);
  }

  isOpen = false;
}
```

### コードのポイント解説

```
┌────────────────────────────────────────────────────────────┐
│                    プログラムの流れ                         │
├────────────────────────────────────────────────────────────┤
│                                                            │
│   【起動時】                                                │
│      │                                                     │
│      ▼                                                     │
│   サーボを0度に（蓋を閉じる）                                │
│      │                                                     │
│      ▼                                                     │
│   【ループ開始】 ◄───────────────────────┐                 │
│      │                                   │                 │
│      ▼                                   │                 │
│   距離を測定                              │                 │
│      │                                   │                 │
│      ▼                                   │                 │
│   20cm以内？ ─── YES ──→ 蓋を開ける      │                 │
│      │                    （90度に）      │                 │
│      │ NO                    │           │                 │
│      │                       ▼           │                 │
│      ├───────────────→ タイマー開始     │                 │
│      │                       │           │                 │
│      ▼                       │           │                 │
│   開いてから3秒経過？         │           │                 │
│      │                       │           │                 │
│      │ YES                   │           │                 │
│      ▼                       │           │                 │
│   蓋を閉じる ◄───────────────┘           │                 │
│   （0度に）                               │                 │
│      │                                   │                 │
│      └───────────────────────────────────┘                 │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

## ゴミ箱への取り付け

### 準備するゴミ箱

```
おすすめのゴミ箱タイプ

【おすすめ】               【難しい】
フラップ式                  回転蓋式

  ┌───┐                    ┌─────┐
  │   │ ← 持ち上げる        │ ↻  │ ← 回転させる
  │   │                    │     │
┌─┴───┴─┐                ┌─┴─────┴─┐
│       │                │         │
│       │                │         │
└───────┘                └─────────┘

サーボで簡単に              機構が複雑
持ち上げられる              になりがち
```

### サーボモーターの固定位置

```
       【横から見た図】

         超音波センサー
              │
          ┌───┴───┐
    ┌─────┤       ├─────┐    ← 蓋
    │     └───────┘     │
    │                   │
════╪═══════════════════╪════
    │ ↑                 │
    │ │                 │
    │ │ サーボ          │
    │ │ ここに          │
    │ │ 取り付け        │
    │ ┌┴┐               │
    │ │◎│← サーボ本体   │
    │ └─┘               │
    │                   │
    └───────────────────┘
```

### サーボと蓋の連結方法

```
方法1: 針金で連結（簡単）

      蓋
    ┌────────────────┐
    │                │
────┴────────────────┴────
    │
    │  針金
    │  （曲げて引っ掛ける）
    │
   ╭┴╮
   │◎│ ← サーボのホーン
   └─┘


方法2: L字金具で連結（頑丈）

      蓋
    ┌────────────────┐
    │                │
────┴────────────────┴────
    │
    ├───┐  L字金具
    │   │
   ╭┴╮  │
   │◎│──┘
   └─┘
```

### 超音波センサーの設置

```
設置のポイント

                検知範囲（約15度の円錐）
                     ／＼
                   ／    ＼
                 ／        ＼
        ┌─────┐/            ＼
        │○  ○│              │
        │     │              │  ← この範囲に手が入ると検知
        └──┬──┘              │
           │                 │
           │    ＼          ／
    ───────┴───── ＼______／
    ゴミ箱の上部

    センサーは斜め下向きに設置すると
    手を検知しやすい！
```

## 動作テスト

### シリアルモニタで確認

1. Arduino IDE でシリアルモニタを開く（ボーレート: 9600）
2. 手をセンサーにかざす
3. 以下のような表示が出ればOK

```
=== スマートゴミ箱 起動！ ===
手をかざすと蓋が開きます
距離: 150 cm
距離: 145 cm
距離: 18 cm      ← 手を検知！
>>> 蓋を開けます！
距離: 15 cm
距離: 20 cm
距離: 180 cm
<<< 蓋を閉じます  ← 3秒後に閉じる
```

### トラブルシューティング

```
┌──────────────────────────────────────────────────────────┐
│                よくある問題と解決方法                      │
├──────────────────────────────────────────────────────────┤
│                                                          │
│ 問題: サーボが動かない                                    │
│ ────────────────────                                     │
│ ✓ 配線を確認（特に信号線が D9 に繋がっているか）           │
│ ✓ 5V と GND が正しく接続されているか                      │
│ ✓ サーボのコネクタがしっかり刺さっているか                 │
│                                                          │
│ 問題: 距離がおかしい値になる                              │
│ ────────────────────────────                             │
│ ✓ Trig と Echo の配線が逆になっていないか                 │
│ ✓ センサーの前に障害物がないか                            │
│ ✓ 電源が安定しているか（USB給電推奨）                     │
│                                                          │
│ 問題: 蓋がガクガク動く                                    │
│ ──────────────────────                                   │
│ ✓ サーボへの電力不足の可能性                              │
│ ✓ 外部電源（5V 1A以上）を使ってみる                       │
│                                                          │
│ 問題: 勝手に開いたり閉じたりする                          │
│ ────────────────────────────────                         │
│ ✓ 検知距離（DETECT_DISTANCE）を調整                      │
│ ✓ センサーの向きを調整                                    │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

## 発展アイデア

基本形ができたら、こんな機能を追加してみましょう！

### LED で状態表示

```cpp
const int LED_PIN = 13;

void openLid() {
  digitalWrite(LED_PIN, HIGH);  // 開いたらLED点灯
  // ... 既存のコード
}

void closeLid() {
  digitalWrite(LED_PIN, LOW);   // 閉じたらLED消灯
  // ... 既存のコード
}
```

### ブザーで音を鳴らす

```cpp
const int BUZZER_PIN = 8;

void openLid() {
  tone(BUZZER_PIN, 1000, 100);  // ピッと鳴らす
  // ... 既存のコード
}
```

### 開閉回数をカウント

```cpp
int openCount = 0;

void openLid() {
  openCount++;
  Serial.print("本日の開閉回数: ");
  Serial.println(openCount);
  // ... 既存のコード
}
```

## 回路図まとめ

```
┌─────────────────────────────────────────────────────────────────┐
│                        完成回路図                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                      ┌─────────────┐                            │
│                      │             │                            │
│                      │   Arduino   │                            │
│                      │     Uno     │                            │
│                      │             │                            │
│                      │         5V ─┼──────┬──────────┐          │
│                      │             │      │          │          │
│                      │        GND ─┼──┬───┼───────┬──┼────┐     │
│                      │             │  │   │       │  │    │     │
│                      │         D9 ─┼──┼───┼───┐   │  │    │     │
│                      │             │  │   │   │   │  │    │     │
│                      │        D10 ─┼──┼───┼───┼───┼──┼─┐  │     │
│                      │             │  │   │   │   │  │ │  │     │
│                      │        D11 ─┼──┼───┼───┼───┼──┼─┼──┼──┐  │
│                      │             │  │   │   │   │  │ │  │  │  │
│                      └─────────────┘  │   │   │   │  │ │  │  │  │
│                                       │   │   │   │  │ │  │  │  │
│     ┌──────────────────┐              │   │   │   │  │ │  │  │  │
│     │   超音波センサー   │              │   │   │   │  │ │  │  │  │
│     │    (HC-SR04)     │              │   │   │   │  │ │  │  │  │
│     │                  │              │   │   │   │  │ │  │  │  │
│     │  VCC ────────────┼──────────────┼───┘   │   │  │ │  │  │  │
│     │  Trig ───────────┼──────────────┼───────┼───┼──┘ │  │  │  │
│     │  Echo ───────────┼──────────────┼───────┼───┼────┼──┘  │  │
│     │  GND ────────────┼──────────────┼───────┼───┼────┼─────┘  │
│     │                  │              │       │   │    │        │
│     └──────────────────┘              │       │   │    │        │
│                                       │       │   │    │        │
│     ┌──────────────────┐              │       │   │    │        │
│     │   サーボモーター    │              │       │   │    │        │
│     │     (SG90)       │              │       │   │    │        │
│     │                  │              │       │   │    │        │
│     │  橙（信号）────────┼──────────────┼───────┘   │    │        │
│     │  赤（VCC）─────────┼──────────────┘           │    │        │
│     │  茶（GND）─────────┼──────────────────────────┘    │        │
│     │                  │                               │        │
│     └──────────────────┘                               │        │
│                                                        │        │
└────────────────────────────────────────────────────────┴────────┘
```

## まとめ

| 項目 | 内容 |
|------|------|
| 制作時間 | 約2〜3時間 |
| 難易度 | ★★☆（初心者でも挑戦OK） |
| 費用 | 約1,500〜4,000円 |
| 学べること | サーボモーター、超音波センサー |

### 今回学んだこと

1. **サーボモーターの仕組み** - 角度を指定して動かせる
2. **超音波センサーの使い方** - 距離を測定できる
3. **2つのセンサー/アクチュエーターの連携** - 入力→判断→出力

電子工作の基本が詰まったプロジェクトなので、これをベースに色々な応用ができます。ぜひ週末に挑戦してみてください！

## 参考リンク

- [Arduino 公式サイト](https://www.arduino.cc/)
- [Servo ライブラリリファレンス](https://www.arduino.cc/reference/en/libraries/servo/)
- [HC-SR04 超音波センサーの使い方](https://www.arduino.cc/en/Tutorial/BuiltInExamples)
